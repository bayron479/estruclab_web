<!DOCTYPE html>
<html lang="es">

  <head>
    <meta charset="utf-8">
    <link rel="icon" href="./imagenes/computer-icon-small.png"> 
    <link rel="shortcut icon" href="./imagenes/favicon.PNG" type="image/x-icon">
    <meta name="author" content="Grupo de Investigación RISK - Universidad del Valle">
    <title>Resistencia del concreto a compresión</title>
		
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" 
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" 
    crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
    integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
    crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tabler-icons/1.35.0/iconfont/tabler-icons.min.css" integrity="sha512-tpsEzNMLQS7w9imFSjbEOHdZav3/aObSESAL1y5jyJDoICFF2YwEdAHOPdOr1t+h8hTzar0flphxR76pd0V1zQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://unpkg.com/@popperjs/core@2/dist/umd/popper.min.js"></script>
    <script src="https://unpkg.com/tippy.js@6/dist/tippy-bundle.umd.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/three@0.136.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.136.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.136.0/examples/js/loaders/GLTFLoader.js"></script>
    
				
		<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.sheetjs.com/xlsx-0.18.10/package/dist/xlsx.full.min.js"></script>
	  
		<script src="concreto-compresion.js"></script>
		
		<style>
			html,
			body {
				margin: 0;
				width: 100%;
			  height: 100%;				
			}
	
			#ventana {
				background-color: #ffffff;
				width: 400px;
				height: 200px;
				position: absolute;
				top: 0;
				left: 0;
			}
		</style>

  </head>

  <body>

  	<!-- Encabezado -->
		<div class="position-fixed w-100 p-3 border-bottom" style="z-index: 100000;background-color: #ffffff;">
  		<div class="row">
  			<div class="col-md-3">
  				<a href="modulo-concreto.html" class="d-flex align-items-center text-dark text-decoration-none">
  					<img src="./imagenes/favicon.PNG" style="height: 30px;">
  						<span class="fs-8">LABORATORIOS VIRTUALES</span>
  				</a>
				</div>
  
  			<!-- Título del ensayo y manual en pdf -->
  			<div class="col-md-9" style="display: flex;	flex-direction: row; justify-content: space-around;">						
  				<p style="text-align:center;">Resistencia del concreto a compresión</p>						
  				<div>						
  					<a  class="btn btn-sm btn-outline-secondary" style="text-align: right;" target="_blank" href="manual-concreto-compresion.pdf">Manual</a>
  				</div>
  			</div>
  		</div>
  	</div> 
  
  	<!-- Panel izquierdo -->
  	<div class="position-fixed" style="width: 400px; background-color: #ffffff;padding: 90px 5px; height: 100%;">
  
  	  <!-- Formulario para ingresar valor de resistencia nominal -->
  	  <div class="card mt-2" style="width: 100%; display: flex;	justify-content: center;	align-items: center;" >
  		  <div class="card-body" style="text-align: center;">
  			  <form class="row g-2" name="formulario" id="formulario">
  				  <div class="col-auto" style="width:250px;">							
  					  <label class="form-label" for="resistenciaNominal" style="font-size:16px;">
  
  						  <strong>Resistencia de diseño (MPa)</strong>
  
  						  <input type="number" required value="21" style="text-align: center; display: flex;	justify-content: center;	align-items: center;" min="15" max="125" class="form-control form-control-sm" name="resistenciaNominal"
  						  id="resistenciaNominal" placeholder="Entre 15 y 125 MPa" form="formulario" title="Resistencia a compresión que debería tener el cilindro de concreto de acuerdo con las especificaciones de diseño">
  															
  						  <div style="text-align: center; padding: 0.25rem;">		
  							  <button type="button" style="text-align: center;" class="btn btn-primary" 
  							  onclick="grafica(),mensajeCargaMaxima()">Iniciar ensayo</button>											
  						  </div> 
  
              </label>
            </div>					
  			  </form>				
  		  </div>
  	  </div>
  			
  	  <!-- Gráfica carga vs deformación-->
  	  <div class="card mb-2" style="width: 100%;">
  		  <div class="card-body">
  			  <canvas id="myChart" style="width: 200px;height: 100px;"></canvas>						
  			  <script></script>
  		  </div>
  	  </div>			
  							 
  	 <!-- Reporte -->
  	 <div class="card mt-2" style="width: 100%;">
  		 <div class="card-body" style="height: 100%;">								
  			 <p id="reporte-diametro"><script>reporteDiametro()</script></p>
				 <p id="reporte-longitud"><script>reporteLongitud()</script></p>
				 <p id="reporte-carga"><script></script></p>			 
  		 </div>
  	 </div>			
  
  	 <!-- Boton descargar datos -->
  	 <div class="card">
  		 <div class="card-body" style="width: 100%; display: flex; justify-content: center;	align-items: center;">																		
  			 <button type="button" onclick="datosEnsayo()" class="btn btn-success">Descargar datos (.xlsx)</button>						
  		 </div>
  	 </div> 	 				
  
    </div>
		
		<!-- Modelo 3d -->
		<div style="position: absolute; top: 90px; left: 400px; width: 100%; height: 100%;">
		
		<canvas id="modelo-3d">
			<script type="module">			

      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
      const renderer = new THREE.WebGLRenderer();
      renderer.setSize(window.innerWidth, window.innerHeight);
      document.body.appendChild(renderer.domElement);

			scene.background = new THREE.Color(0xa0a0a0);
		  scene.fog = new THREE.Fog(0xa0a0a0, 10, 50);
  
		  const hemiLight = new THREE.HemisphereLight(0xffffff, 0x444444);
		  hemiLight.position.set(0, 20, 0);
			scene.add(hemiLight);		  
  
		  const dirLight = new THREE.DirectionalLight(0xffffff);
		  dirLight.position.set(- 3, 10, - 10);
		  dirLight.castShadow = true;
		  dirLight.shadow.camera.top = 2;
		  dirLight.shadow.camera.bottom = - 2;
		  dirLight.shadow.camera.left = - 2;
		  dirLight.shadow.camera.right = 2;
		  dirLight.shadow.camera.near = 0.1;
		  dirLight.shadow.camera.far = 40;
			scene.add(dirLight);			
      
			//var loader = new THREE.GLTFLoader();

      const loader = new THREE.GLTFLoader();
      
      loader.load('concreto-compresion.gltf', function(gltf) {
      
      	scene.add(gltf.scene);							
      
      }, undefined, function (error) {
      
      	console.error(error);
      
      });
      
      function animate() {
      	requestAnimationFrame( animate );
      	renderer.render( scene, camera );
      }
      animate();

		  </script>
		</canvas>
		
		
		</div>


  </body>
</html>